<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <!-- <script src="script.js"></script> -->
    <title>Rock Paper Scissors</title>
</head>
<body>
    <div class="header">
        <div class = "title">Elemental</div>
        <div class="sub-title"> Rock Paper Scissors but better</div>
        <div class="sub-title"> First to five points wins</div>
    </div>

    <div class="game">
        <div class="human">
            <div class="name">YOU:</div>
            <div class="score">0</div>
            <div class="choices" id="human-choices">
                <img class = "human-img" id="one" src="/images/water.png">
                <img class = "human-img" id="two"src="/images/leaf.png">
                <img class = "human-img" id="three"src="/images/fire.png">
            </div>
        </div>

        <div class="cpu">
            <div class="name">CPU:</div>
            <div class="score">0</div>
            <div class="choices" id="cpu-choices">
                <img class = "cpu-img" id="one-c" src="/images/water.png">
                <img class = "cpu-img" id="two-c"src="/images/leaf.png">
                <img class = "cpu-img" id="three-c" src="/images/fire.png">
            </div>
        </div>
    </div>

    <div class = "announce">
        <button id ="confirm">Confirm</button>
        <div>Rock beats paper! Point goes to CPU</div>
    </div>
 

    
</body>


<script>

    const elements = ["Water", "Leaf", "Fire"];
    
    computerSelection =  Math.floor(Math.random() * 3) + 1;
    let playerSelection;
    
    const choices = document.querySelectorAll('.human-img');
    const choicesComputer = document.querySelectorAll('.cpu-img');
    const button = document.querySelector('#confirm');
    button.addEventListener('click', moveOn);

    let currentChoice = 0;
    let turnOpponent = false;
    let playerWin;
    let winnerMessage;
    let computerCount = 0;
    let playerCount = 0;
    var interval = setInterval(userTurn, 10);

    

    choices.forEach((choice) =>{
        choice.addEventListener('click',addBorder);
    });



    function addBorder(element){
        currentChoice = element.target.getAttribute('id');
    }

    function moveOn(button){
        if(currentChoice!=0){
            turnOpponent = true;
            assignNumber();
            console.log("HELLO");
            cpuChoice();
        }

    }

    function userTurn(){
        choices.forEach((choice) =>{
            compareChoice = choice.getAttribute('id');
            if (compareChoice == currentChoice){
                choice.classList.add('picked');
            }
            else{
                choice.classList.remove('picked');
            }

            if (turnOpponent == true){
                clearInterval(interval);
            }
        });
    }   

    function assignNumber(){
        if (currentChoice == 'one'){
            playerSelection = 1;
            console.log(playerSelection);
        }
        else if(currentChoice == 'two'){
            playerSelection = 2;
            console.log(playerSelection);
        }
        else if(currentChoice == 'three'){
            playerSelection = 3
            console.log(playerSelection);
        }
        else{
            console.log("something went wrong")
        }

    }


    function cpuChoice(){
        if (computerSelection == 1){
            let onec = document.querySelector('#one-c');
            onec.classList.add('picked');
        }
        else if(computerSelection ==2){
            let twoc = document.querySelector('#two-c');
            twoc.classList.add('picked');
        }
        else if(computerSelection == 3){
            let threec = document.querySelector('#three-c');
            threec.classList.add('picked');
        }
        else{
            console.log("gay");
        }
        decideWinner();
        
    }

    function decideWinner(){
        if (parseInt(playerSelection) == 1 && computerSelection == 3 ){
            playerWin = true;
            winnerMessage = "You win!";
            console.log(winnerMessage);
            playerCount++;

        } else if (parseInt(playerSelection) == 3 && computerSelection == 1){
            playerWin = false;
            winnerMessage = "Computer wins!";
            console.log(winnerMessage);
            computerCount++;

        } else if (parseInt(playerSelection) > computerSelection){
            playerWin = true;
            winnerMessage = "You win!";
            console.log(winnerMessage);
            playerCount++;

        } else if (parseInt(playerSelection) == computerSelection){
            playerWin = false;
            winnerMessage = "It's a tie!";
            console.log(winnerMessage);

        } else{
            playerWin = false;
            winnerMessage = "Computer wins!";
            console.log(winnerMessage);
            computerCount++;
        }

    }

    function reset(){

    }
   

    




</script>

</html>